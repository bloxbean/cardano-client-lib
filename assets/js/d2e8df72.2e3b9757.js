"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[985],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=c(n),m=r,h=p["".concat(s,".").concat(m)]||p[m]||u[m]||l;return n?a.createElement(h,o(o({ref:t},d),{},{components:n})):a.createElement(h,o({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var c=2;c<l;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},785:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const l={description:"Plutus Blueprint Code Generation",sidebar_label:"Plutus Blueprint Code Generation",sidebar_position:3},o="Using Plutus Blueprint Annotations for Code Generation",i={unversionedId:"annotations/plutus-blueprint-code-generation",id:"annotations/plutus-blueprint-code-generation",title:"Using Plutus Blueprint Annotations for Code Generation",description:"Plutus Blueprint Code Generation",source:"@site/docs/annotations/plutus-blueprint-code-generation.md",sourceDirName:"annotations",slug:"/annotations/plutus-blueprint-code-generation",permalink:"/docs/annotations/plutus-blueprint-code-generation",draft:!1,editUrl:"https://github.com/bloxbean/cardano-client/tree/main/docs/docs/annotations/plutus-blueprint-code-generation.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{description:"Plutus Blueprint Code Generation",sidebar_label:"Plutus Blueprint Code Generation",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Plutus Data Annotations",permalink:"/docs/annotations/plutus-data-annotations"},next:{title:"Integrations",permalink:"/docs/category/integrations"}},s={},c=[{value:"Annotations",id:"annotations",level:2},{value:"How to Use",id:"how-to-use",level:2},{value:"Example Directory Structure",id:"example-directory-structure",level:2},{value:"Hello World Plutus Blueprint JSON",id:"hello-world-plutus-blueprint-json",level:4},{value:"Define the Plutus Blueprint Interface",id:"define-the-plutus-blueprint-interface",level:2},{value:"Generate Validator, Datum, and Redeemer Classes",id:"generate-validator-datum-and-redeemer-classes",level:2},{value:"Validator Class",id:"validator-class",level:3},{value:"Datum Class",id:"datum-class",level:3},{value:"Redeemer Class",id:"redeemer-class",level:3},{value:"Datum Data Class",id:"datum-data-class",level:3},{value:"Redeemer Data Class",id:"redeemer-data-class",level:3},{value:"Datum Converter Class",id:"datum-converter-class",level:3},{value:"Redeemer Converter Class",id:"redeemer-converter-class",level:3},{value:"Use Datum and Redeemer classes",id:"use-datum-and-redeemer-classes",level:2},{value:"Extend Validator Class with Custom Extender Interfaces",id:"extend-validator-class-with-custom-extender-interfaces",level:2},{value:"Using the Extended Validator Class",id:"using-the-extended-validator-class",level:2},{value:"Composing Validator Transactions with Other Transactions or Script Transactions",id:"composing-validator-transactions-with-other-transactions-or-script-transactions",level:2}],d={toc:c};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"using-plutus-blueprint-annotations-for-code-generation"},"Using Plutus Blueprint Annotations for Code Generation"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Available in 0.6.0-beta1 and later.")),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"This is a preview feature and is subject to change."))),(0,r.kt)("p",null,"This section describes how to use Plutus Blueprint Annotations to generate code from a Plutus Blueprint JSON file.\nFor details about the Plutus Contract Blueprint CIP, refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/cardano-foundation/CIPs/tree/master/CIP-0057"},"CIP-57 documentation"),"."),(0,r.kt)("p",null,"A Plutus Blueprint JSON file (e.g., ",(0,r.kt)("inlineCode",{parentName:"p"},"plutus.json"),") can be generated during the compilation of your smart contract. For example,\nif you are using Aiken for smart contract development, the ",(0,r.kt)("inlineCode",{parentName:"p"},"plutus.json")," file is automatically generated during the compilation of your project."),(0,r.kt)("h2",{id:"annotations"},"Annotations"),(0,r.kt)("p",null,"Two main annotations can be used to generate code from the Plutus Blueprint JSON file:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"@PlutusBlueprint")),": Specifies the path to the Plutus Blueprint JSON file. This annotation should be used at the interface level."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"@ExtendWith")),": Adds additional functionalities to the generated validator class through Extender interfaces.")),(0,r.kt)("p",null,"For more information about Extender interfaces, refer to the ",(0,r.kt)("a",{parentName:"p",href:"#extend-validator-class-with-custom-extender-interfaces"},"Extender Interfaces")," section."),(0,r.kt)("h2",{id:"how-to-use"},"How to Use"),(0,r.kt)("p",null,"Before using the annotations, copy the Plutus Blueprint JSON file to the resources folder of your project.\nYou can name the Plutus JSON file as you prefer, or use ",(0,r.kt)("inlineCode",{parentName:"p"},"plutus.json")," if you only have one blueprint file in the project."),(0,r.kt)("h2",{id:"example-directory-structure"},"Example Directory Structure"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"src\n  |- main\n      |- resources\n          |- hello_world_plutus.json\n")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click here to view the Hello World Plutus Blueprint file"),(0,r.kt)("h4",{id:"hello-world-plutus-blueprint-json"},"Hello World Plutus Blueprint JSON"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "preamble": {\n    "title": "aiken_lang/hello_word",\n    "description": "Aiken contracts for project \'aiken_lang/hello_word\'",\n    "version": "0.0.0",\n    "plutusVersion": "v2",\n    "compiler": {\n      "name": "Aiken",\n      "version": "v1.0.21-alpha+4b04517"\n    },\n    "license": "Apache-2.0"\n  },\n  "validators": [\n    {\n      "title": "hello_world.hello_world",\n      "datum": {\n        "title": "datum",\n        "schema": {\n          "$ref": "#/definitions/hello_world~1Datum"\n        }\n      },\n      "redeemer": {\n        "title": "redeemer",\n        "schema": {\n          "$ref": "#/definitions/hello_world~1Redeemer"\n        }\n      },\n      "compiledCode": "58f2010000323232323232323222232325333008323232533300b002100114a06644646600200200644a66602200229404c8c94ccc040cdc78010028a511330040040013014002375c60240026eb0c038c03cc03cc03cc03cc03cc03cc03cc03cc020c008c020014dd71801180400399b8f375c6002600e00a91010d48656c6c6f2c20576f726c6421002300d00114984d958c94ccc020cdc3a400000226464a66601a601e0042930b1bae300d00130060041630060033253330073370e900000089919299980618070010a4c2c6eb8c030004c01401058c01400c8c014dd5000918019baa0015734aae7555cf2ab9f5742ae881",\n      "hash": "6fb13cf9efdbe986e784d1983b21d3fb90231c1745925f536a820fb4"\n    }\n  ],\n  "definitions": {\n    "ByteArray": {\n      "dataType": "bytes"\n    },\n    "hello_world/Datum": {\n      "title": "Datum",\n      "anyOf": [\n        {\n          "title": "Datum",\n          "dataType": "constructor",\n          "index": 0,\n          "fields": [\n            {\n              "title": "owner",\n              "$ref": "#/definitions/ByteArray"\n            }\n          ]\n        }\n      ]\n    },\n    "hello_world/Redeemer": {\n      "title": "Redeemer",\n      "anyOf": [\n        {\n          "title": "Redeemer",\n          "dataType": "constructor",\n          "index": 0,\n          "fields": [\n            {\n              "title": "msg",\n              "$ref": "#/definitions/ByteArray"\n            }\n          ]\n        }\n      ]\n    }\n  }\n}\n'))),(0,r.kt)("details",null," ",(0,r.kt)("summary",null,"Click here to view the Aiken file for the above Plutus Blueprint"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'use aiken/hash.{Blake2b_224, Hash}\nuse aiken/list\nuse aiken/transaction.{ScriptContext}\nuse aiken/transaction/credential.{VerificationKey}\n \ntype Datum {\n  owner: Hash<Blake2b_224, VerificationKey>,\n}\n \ntype Redeemer {\n  msg: ByteArray,\n}\n \nvalidator {\n  fn hello_world(datum: Datum, redeemer: Redeemer, context: ScriptContext) -> Bool {\n    let must_say_hello =\n      redeemer.msg == "Hello, World!"\n \n    let must_be_signed =\n      list.has(context.transaction.extra_signatories, datum.owner)\n \n    must_say_hello && must_be_signed\n  }\n}\n'))),(0,r.kt)("h2",{id:"define-the-plutus-blueprint-interface"},"Define the Plutus Blueprint Interface"),(0,r.kt)("p",null,"You can now create the Plutus Blueprint interface in your project and annotate it with the ",(0,r.kt)("inlineCode",{parentName:"p"},"@PlutusBlueprint")," annotation."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Blueprint(fileInResources = "hello_world_plutus.json", packageName = "com.example.helloworld")\npublic interface HelloWorldBlueprint {\n}\n')),(0,r.kt)("h2",{id:"generate-validator-datum-and-redeemer-classes"},"Generate Validator, Datum, and Redeemer Classes"),(0,r.kt)("p",null,"Now, run Maven compile or Gradle build to compile the project. The validator class, along with the Datum and Redeemer classes,\nwill be generated in the build folder's generated source folder."),(0,r.kt)("p",null,"For Maven, the generated classes will be in the 'generated-sources' folder under the target directory."),(0,r.kt)("p",null,"The following classes are generated:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Validator class for each validator in the blueprint JSON file."),(0,r.kt)("li",{parentName:"ul"},"Abstract class for Datum and Redeemer of each validator."),(0,r.kt)("li",{parentName:"ul"},"Implementation (Data) class for Datum and Redeemer of each validator, extending the abstract class and providing utility methods to serialize and deserialize the data."),(0,r.kt)("li",{parentName:"ul"},"Converter class for each Datum and Redeemer class, offering utilities to serialize and deserialize the data.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"target\n  |- generated-sources\n      |- com\n          |- example\n              |- helloworld\n                 |- hello_world\n                    |- model\n                        |- converter\n                            |- DatumDataConverter.java\n                            |- RedeemerDataConverter.java\n                        |- impl\n                            |- DatumData.java\n                            |- RedeemerData.java\n                        |- Datum.java\n                        |- Redeemer.java\n                    |- HelloWorldValidator.java  \n    \n")),(0,r.kt)("h3",{id:"validator-class"},"Validator Class"),(0,r.kt)("p",null,"The generated validator class includes the following methods by default:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"getScriptAddress()"),": Returns the address of the validator script."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"getPlutusScript()"),": Returns the ",(0,r.kt)("inlineCode",{parentName:"li"},"PlutusScript")," object from the compiled code.")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click here to view ",(0,r.kt)("b",null,"HelloWorldValidator.java")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class HelloWorldValidator {\n  public static final String TITLE = "hello_world.hello_world";\n\n  public static final String DESCRIPTION = null;\n\n  public static final String COMPILED_CODE = "58f2010000323232323232323222232325333008323232533300b002100114a06644646600200200644a66602200229404c8c94ccc040cdc78010028a511330040040013014002375c60240026eb0c038c03cc03cc03cc03cc03cc03cc03cc03cc020c008c020014dd71801180400399b8f375c6002600e00a91010d48656c6c6f2c20576f726c6421002300d00114984d958c94ccc020cdc3a400000226464a66601a601e0042930b1bae300d00130060041630060033253330073370e900000089919299980618070010a4c2c6eb8c030004c01401058c01400c8c014dd5000918019baa0015734aae7555cf2ab9f5742ae881";\n\n  public static final String HASH = "6fb13cf9efdbe986e784d1983b21d3fb90231c1745925f536a820fb4";\n\n  private Network network;\n\n  private String scriptAddress;\n\n  private PlutusScript plutusScript;\n\n  public HelloWorldValidator(Network network) {\n    this.network = network;\n  }\n\n  public Network getNetwork() {\n    return this.network;\n  }\n\n  public void setNetwork(Network network) {\n    this.network = network;\n  }\n\n  /**\n   * Returns the address of the validator script\n   */\n  public String getScriptAddress() {\n    if(scriptAddress == null) {\n      var script = getPlutusScript();\n      scriptAddress = AddressProvider.getEntAddress(script, network).toBech32();\n    }\n    return scriptAddress;\n  }\n\n  public PlutusScript getPlutusScript() {\n    if (plutusScript == null) {\n      plutusScript = PlutusBlueprintUtil.getPlutusScriptFromCompiledCode(COMPILED_CODE, PlutusVersion.v2);\n    }\n    return plutusScript;\n  }\n}\n'))),(0,r.kt)("h3",{id:"datum-class"},"Datum Class"),(0,r.kt)("p",null,"The generator creates a Datum class for each Datum in the blueprint JSON file. The Datum class contains the fields defined in the Datum schema and is abstract."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click here to view ",(0,r.kt)("b",null,"Datum.java")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"import com.bloxbean.cardano.client.plutus.annotation.Constr;\nimport com.bloxbean.cardano.client.plutus.blueprint.model.Data;\n\n@Constr(\n        alternative = 0\n)\npublic abstract class Datum implements Data<Datum> {\n    /**\n     *  Index: 0\n     */\n    private byte[] owner;\n\n    public byte[] getOwner() {\n        return this.owner;\n    }\n\n    public void setOwner(byte[] owner) {\n        this.owner = owner;\n    }\n}\n"))),(0,r.kt)("h3",{id:"redeemer-class"},"Redeemer Class"),(0,r.kt)("p",null,"The generator creates a Redeemer class for each Redeemer in the blueprint JSON file. The Redeemer class contains the fields defined in the Redeemer schema and is abstract."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click here to view ",(0,r.kt)("b",null,"Redeemer.java")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"import com.bloxbean.cardano.client.plutus.annotation.Constr;\nimport com.bloxbean.cardano.client.plutus.blueprint.model.Data;\n\n@Constr(\n        alternative = 0\n)\npublic abstract class Redeemer implements Data<Redeemer> {\n    /**\n     *  Index: 0\n     */\n    private byte[] msg;\n\n    public byte[] getMsg() {\n        return this.msg;\n    }\n\n    public void setMsg(byte[] msg) {\n        this.msg = msg;\n    }\n}\n"))),(0,r.kt)("h3",{id:"datum-data-class"},"Datum Data Class"),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"DatumData")," class is generated for each Datum class. This class extends the abstract Datum class and provides utility methods to serialize and deserialize the data."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click here to view ",(0,r.kt)("b",null,"DatumData.java")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"import com.bloxbean.cardano.client.plutus.blueprint.model.Data;\nimport com.bloxbean.cardano.client.plutus.spec.ConstrPlutusData;\nimport com.example.helloworld.hello_world.model.Datum;\nimport com.example.helloworld.hello_world.model.converter.DatumConverter;\nimport java.lang.Override;\nimport java.lang.String;\n\n/**\n * Auto generated code. DO NOT MODIFY\n */\npublic class DatumData extends Datum implements Data<Datum> {\n  private static DatumConverter converter = new DatumConverter();\n\n  public DatumData() {\n  }\n\n  @Override\n  public ConstrPlutusData toPlutusData() {\n    return converter.toPlutusData((Datum)this);\n  }\n\n  public static Datum fromPlutusData(ConstrPlutusData data) {\n    return converter.fromPlutusData(data);\n  }\n\n  public static Datum deserialize(String cborHex) {\n    return converter.deserialize(cborHex);\n  }\n\n  public static Datum deserialize(byte[] cborBytes) {\n    return converter.deserialize(cborBytes);\n  }\n}\n\n"))),(0,r.kt)("h3",{id:"redeemer-data-class"},"Redeemer Data Class"),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"RedeemerData")," class is generated for each Redeemer class. This class extends the abstract Redeemer class and provides utility methods to serialize and deserialize the data."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click here to view ",(0,r.kt)("b",null,"RedeemerData.java")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"import com.bloxbean.cardano.client.plutus.blueprint.model.Data;\nimport com.bloxbean.cardano.client.plutus.spec.ConstrPlutusData;\nimport com.example.helloworld.hello_world.model.Redeemer;\nimport com.example.helloworld.hello_world.model.converter.RedeemerConverter;\nimport java.lang.Override;\nimport java.lang.String;\n\n/**\n * Auto generated code. DO NOT MODIFY\n */\npublic class RedeemerData extends Redeemer implements Data<Redeemer> {\n  private static RedeemerConverter converter = new RedeemerConverter();\n\n  public RedeemerData() {\n  }\n\n  @Override\n  public ConstrPlutusData toPlutusData() {\n    return converter.toPlutusData((Redeemer)this);\n  }\n\n  public static Redeemer fromPlutusData(ConstrPlutusData data) {\n    return converter.fromPlutusData(data);\n  }\n\n  public static Redeemer deserialize(String cborHex) {\n    return converter.deserialize(cborHex);\n  }\n\n  public static Redeemer deserialize(byte[] cborBytes) {\n    return converter.deserialize(cborBytes);\n  }\n}\n\n"))),(0,r.kt)("h3",{id:"datum-converter-class"},"Datum Converter Class"),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"DatumConverter")," class is generated for each Datum class. This class provides utility methods to serialize and deserialize the data.\nTypically, you don't need to use converter classes directly as the ",(0,r.kt)("inlineCode",{parentName:"p"},"DatumData")," class offers these utility methods."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click here to view ",(0,r.kt)("b",null,"DatumConverter.java")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import com.bloxbean.cardano.client.common.cbor.CborSerializationUtil;\nimport com.bloxbean.cardano.client.exception.CborRuntimeException;\nimport com.bloxbean.cardano.client.plutus.annotation.BasePlutusDataConverter;\nimport com.bloxbean.cardano.client.plutus.spec.BytesPlutusData;\nimport com.bloxbean.cardano.client.plutus.spec.ConstrPlutusData;\nimport com.bloxbean.cardano.client.util.HexUtil;\nimport com.example.helloworld.hello_world.model.Datum;\nimport com.example.helloworld.hello_world.model.impl.DatumData;\nimport java.lang.Exception;\nimport java.lang.String;\nimport java.util.Objects;\n\n/**\n * Auto generated code. DO NOT MODIFY\n */\npublic class DatumConverter extends BasePlutusDataConverter {\n  public ConstrPlutusData toPlutusData(Datum obj) {\n    ConstrPlutusData constr = initConstr(0);\n    //Field owner\n    Objects.requireNonNull(obj.getOwner(), "owner cannot be null");\n    constr.getData().add(toPlutusData(obj.getOwner()));\n\n    return constr;\n  }\n\n  public Datum fromPlutusData(ConstrPlutusData constr) {\n    var obj = new DatumData();\n    var data = constr.getData();\n\n    //Field owner\n    var owner = ((BytesPlutusData)data.getPlutusDataList().get(0)).getValue();\n    obj.setOwner(owner);\n    return obj;\n  }\n\n  public byte[] serialize(Datum obj) {\n    Objects.requireNonNull(obj);;\n    try {\n      var constr = toPlutusData(obj);\n      return CborSerializationUtil.serialize(constr.serialize());\n    } catch (Exception e) {\n      throw new CborRuntimeException(e);\n    }\n  }\n\n  public String serializeToHex(Datum obj) {\n    Objects.requireNonNull(obj);;\n    var constr = toPlutusData(obj);\n    return constr.serializeToHex();\n  }\n\n  public Datum deserialize(byte[] bytes) {\n    Objects.requireNonNull(bytes);;\n    try {\n      var di = CborSerializationUtil.deserialize(bytes);\n      var constr = ConstrPlutusData.deserialize(di);\n      return fromPlutusData(constr);\n    } catch (Exception e) {\n      throw new CborRuntimeException(e);\n    }\n  }\n\n  public Datum deserialize(String hex) {\n    Objects.requireNonNull(hex);;\n    var bytes = HexUtil.decodeHexString(hex);\n    return deserialize(bytes);\n  }\n}\n\n'))),(0,r.kt)("h3",{id:"redeemer-converter-class"},"Redeemer Converter Class"),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"RedeemerConverter")," class is generated for each Redeemer class. This class provides utility methods to serialize and deserialize the data.\nTypically, you don't need to use converter classes directly as the ",(0,r.kt)("inlineCode",{parentName:"p"},"RedeemerData")," class offers these utility methods."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click here to view ",(0,r.kt)("b",null,"RedeemerConverter.java")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import com.bloxbean.cardano.client.common.cbor.CborSerializationUtil;\nimport com.bloxbean.cardano.client.exception.CborRuntimeException;\nimport com.bloxbean.cardano.client.plutus.annotation.BasePlutusDataConverter;\nimport com.bloxbean.cardano.client.plutus.spec.BytesPlutusData;\nimport com.bloxbean.cardano.client.plutus.spec.ConstrPlutusData;\nimport com.bloxbean.cardano.client.util.HexUtil;\nimport com.example.helloworld.hello_world.model.Redeemer;\nimport com.example.helloworld.hello_world.model.impl.RedeemerData;\nimport java.lang.Exception;\nimport java.lang.String;\nimport java.util.Objects;\n\n/**\n * Auto generated code. DO NOT MODIFY\n */\npublic class RedeemerConverter extends BasePlutusDataConverter {\n  public ConstrPlutusData toPlutusData(Redeemer obj) {\n    ConstrPlutusData constr = initConstr(0);\n    //Field msg\n    Objects.requireNonNull(obj.getMsg(), "msg cannot be null");\n    constr.getData().add(toPlutusData(obj.getMsg()));\n\n    return constr;\n  }\n\n  public Redeemer fromPlutusData(ConstrPlutusData constr) {\n    var obj = new RedeemerData();\n    var data = constr.getData();\n\n    //Field msg\n    var msg = ((BytesPlutusData)data.getPlutusDataList().get(0)).getValue();\n    obj.setMsg(msg);\n    return obj;\n  }\n\n  public byte[] serialize(Redeemer obj) {\n    Objects.requireNonNull(obj);;\n    try {\n      var constr = toPlutusData(obj);\n      return CborSerializationUtil.serialize(constr.serialize());\n    } catch (Exception e) {\n      throw new CborRuntimeException(e);\n    }\n  }\n\n  public String serializeToHex(Redeemer obj) {\n    Objects.requireNonNull(obj);;\n    var constr = toPlutusData(obj);\n    return constr.serializeToHex();\n  }\n\n  public Redeemer deserialize(byte[] bytes) {\n    Objects.requireNonNull(bytes);;\n    try {\n      var di = CborSerializationUtil.deserialize(bytes);\n      var constr = ConstrPlutusData.deserialize(di);\n      return fromPlutusData(constr);\n    } catch (Exception e) {\n      throw new CborRuntimeException(e);\n    }\n  }\n\n  public Redeemer deserialize(String hex) {\n    Objects.requireNonNull(hex);;\n    var bytes = HexUtil.decodeHexString(hex);\n    return deserialize(bytes);\n  }\n}\n\n'))),(0,r.kt)("h2",{id:"use-datum-and-redeemer-classes"},"Use Datum and Redeemer classes"),(0,r.kt)("p",null,"You can instantiate Datum and Redeemer objects using the generated Data (implementation) classes."),(0,r.kt)("p",null,"Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"DatumData.toPlutusData")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"DatumData.fromPlutusData")," methods to convert the Data object to a PlutusData object and vice versa."),(0,r.kt)("p",null,"Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"DatumData.serialize")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"DatumData.deserialize")," methods to serialize and deserialize the data."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"DatumData datum = new DatumData();\n")),(0,r.kt)("h2",{id:"extend-validator-class-with-custom-extender-interfaces"},"Extend Validator Class with Custom Extender Interfaces"),(0,r.kt)("p",null,"You can extend the generated validator class with custom Extender interfaces to provide additional functionalities.\nExtenders are interfaces with default methods that can add functionalities to the generated validator class. Each extender interface extends the ",(0,r.kt)("inlineCode",{parentName:"p"},"ValidatorExtender")," interface."),(0,r.kt)("p",null,"Several built-in extender interfaces are available, and they can be added to the validator class using the ",(0,r.kt)("inlineCode",{parentName:"p"},"@ExtendWith")," annotation.\nYou can also write your own extender interfaces by extending the ",(0,r.kt)("inlineCode",{parentName:"p"},"ValidatorExtender")," interface and use them in the validator class."),(0,r.kt)("p",null,"Available built-in extender interfaces include:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"LockUnlockValidatorExtender"),": Provides methods to lock and unlock the validator script."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"MintValidatorExtender"),": Provides common methods to mint tokens."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"DeployValidatorExtender"),": Adds functionality to create an output with a reference script for the validator.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note"),": Additional extender interfaces will be added in the future."),(0,r.kt)("p",null,"The methods in the built-in extender interfaces are compatible with the ",(0,r.kt)("strong",{parentName:"p"},"QuickTx API"),"."),(0,r.kt)("p",null,"Let's see how to extend the validator class with ",(0,r.kt)("inlineCode",{parentName:"p"},"ValidatorExtender")," interfaces:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Blueprint(fileInResources = "hello_world_plutus.json", packageName = "com.example.helloworld")\n@ExtendWith({LockUnlockValidatorExtender.class, MintValidatorExtender.class})\npublic interface HelloWorldBlueprint {\n    \n}\n')),(0,r.kt)("p",null,"In this example, we use both the ",(0,r.kt)("inlineCode",{parentName:"p"},"LockUnlockValidatorExtender")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"MintValidatorExtender")," interfaces to extend the validator class.\nSince ",(0,r.kt)("inlineCode",{parentName:"p"},"LockUnlockValidatorExtender")," extends ",(0,r.kt)("inlineCode",{parentName:"p"},"DeployValidatorExtender"),", the validator class will also inherit methods from ",(0,r.kt)("inlineCode",{parentName:"p"},"DeployValidatorExtender"),"."),(0,r.kt)("p",null,"After compiling the project again, the generated validator class will extend the ",(0,r.kt)("inlineCode",{parentName:"p"},"LockUnlockValidatorExtender")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"MintValidatorExtender")," interfaces."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class HelloWorldValidator extends AbstractValidatorExtender<HelloWorldValidator>\n        implements LockUnlockValidatorExtender<HelloWorldValidator>, MintValidatorExtender<HelloWorldValidator> \n")),(0,r.kt)("h2",{id:"using-the-extended-validator-class"},"Using the Extended Validator Class"),(0,r.kt)("p",null,"You can now use the extended validator class to lock, unlock, mint tokens, and create outputs with reference scripts."),(0,r.kt)("p",null,"Here's an example of using the extended validator class to lock and unlock the validator script. First, a reference output is created with the ",(0,r.kt)("inlineCode",{parentName:"p"},"deploy")," method, and then the ",(0,r.kt)("inlineCode",{parentName:"p"},"lock")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"unlock")," methods are used to lock and unlock the validator script."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click here to see how to lock and unlock using ",(0,r.kt)("b",null,"HelloWorldValidator")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import com.bloxbean.cardano.client.account.Account;\nimport com.bloxbean.cardano.client.api.model.Amount;\nimport com.bloxbean.cardano.client.backend.blockfrost.service.BFBackendService;\nimport com.bloxbean.cardano.client.common.model.Networks;\nimport com.bloxbean.cardano.client.function.helper.SignerProviders;\nimport com.example.helloworld.hello_world.HelloWorldValidator;\nimport com.example.helloworld.hello_world.model.Datum;\nimport com.example.helloworld.hello_world.model.impl.DatumData;\nimport com.example.helloworld.hello_world.model.impl.RedeemerData;\n\npublic class HelloWorldTest {\n    private static String mnemonic = "test test test test test test test test test test test test test test test test test test test test test test test sauce";\n    private static Account account = new Account(Networks.testnet(), mnemonic);\n    private static BFBackendService backendService = new BFBackendService("http://localhost:8080/api/v1/", "");\n\n    private HelloWorldValidator helloWorldValidator;\n\n    public HelloWorldTest() {\n        this.helloWorldValidator = new HelloWorldValidator(Networks.testnet())\n                .withBackendService(backendService);\n    }\n\n    public void deploy() {\n        var deployTx = helloWorldValidator.deploy(account.baseAddress())\n                .feePayer(account.baseAddress())\n                .withSigner(SignerProviders.signerFrom(account))\n                .completeAndWait(System.out::println);\n\n        this.helloWorldValidator\n                        .withReferenceTxInput(deployTx.getValue(), 0);\n\n        System.out.println("Deploy Tx:" + deployTx);\n    }\n\n    public Datum lock() {\n        var datum = new DatumData();\n        datum.setOwner(account.getBaseAddress().getPaymentCredentialHash().get());\n\n        var lockTx = helloWorldValidator.lock(account.baseAddress(), Amount.ada(20), datum)\n                .feePayer(account.baseAddress())\n                .withSigner(SignerProviders.signerFrom(account))\n                .completeAndWait(System.out::println);\n\n        System.out.println("Lock Tx: " + lockTx);\n\n        return datum;\n    }\n\n    public void unlock(Datum datum) {\n        var redeemerData = new RedeemerData();\n        redeemerData.setMsg("Hello, World!".getBytes());\n\n        var unlockTx = helloWorldValidator.unlockToAddress(datum, redeemerData, account.baseAddress())\n                .feePayer(account.baseAddress())\n                .withSigner(SignerProviders.signerFrom(account))\n                .withRequiredSigners(account.getBaseAddress())\n                .completeAndWait(System.out::println);\n\n        System.out.println("Unlock Tx: " + unlockTx);\n    }\n\n    public static void main(String[] args) {\n        HelloWorldTest helloWorldTest = new HelloWorldTest();\n        //Deploy and create reference input\n        helloWorldTest.deploy();\n\n        //Lock ADA\n        var datum = helloWorldTest.lock();\n\n        //Unlock ADA\n        helloWorldTest.unlock(datum);\n\n    }\n}\n\n'))),(0,r.kt)("h2",{id:"composing-validator-transactions-with-other-transactions-or-script-transactions"},"Composing Validator Transactions with Other Transactions or Script Transactions"),(0,r.kt)("p",null,"If you want to compose the validator transaction described above with other transactions, the out-of-box extenders provide\nadditional methods that return a ",(0,r.kt)("inlineCode",{parentName:"p"},"ScriptTx")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Tx")," object. These ",(0,r.kt)("inlineCode",{parentName:"p"},"ScriptTx")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Tx")," objects can then be composed with other transactions (Tx) or script transactions (ScriptTx)."),(0,r.kt)("p",null,'Typically, these methods have names that end with "Tx". For example, in ',(0,r.kt)("inlineCode",{parentName:"p"},"LockUnlockExtender.java"),", here are a few methods that return a ",(0,r.kt)("inlineCode",{parentName:"p"},"Tx")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"ScriptTx")," object:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Tx lockTx(String fromAddress, Amount amount, Data datum)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ScriptTx unlockToAddressTx(Data inputDatum, Data redeemer, String receiver)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ScriptTx unlockToContractTx(Data inputDatum, Data redeemer, String receiver, Data outputData)"))))}u.isMDXComponent=!0}}]);