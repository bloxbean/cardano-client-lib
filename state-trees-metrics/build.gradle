dependencies {
    // Core JMT API (provides JmtMetrics interface)
    api project(':state-trees')

    // Micrometer core - compileOnly so applications choose their own version
    // Applications must add: implementation 'io.micrometer:micrometer-core:1.15.+'
    compileOnly(libs.micrometer.core)

    // Test dependencies - we need actual Micrometer for tests
    testImplementation(libs.micrometer.core)
    testImplementation('io.micrometer:micrometer-registry-prometheus:1.15.4')
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            pom {
                name = 'Cardano Client State Trees Metrics'
                description = 'Micrometer metrics integration for State Trees (optional module)'
            }
        }
    }
}